name: build unified manifest file
on: [push]
jobs:
  build_file:
    name: build unified manifest file
    runs-on: ubuntu-latest
    steps:
      - name: Check out the repo
        uses: actions/checkout@v2
      - name: Run script
        uses: actions/setup-python@v2
      - name: Run script
        uses: jannekem/run-python-script-action@v1
        with:
          script: |
            import os, json, shutil
            path_to_json = 'configs/'
            json_files = [pos_json for pos_json in os.listdir(path_to_json) if pos_json.endswith('.json')]
            print(json_files)
            for filename in json_files:
              print(filename)
      #            print("Directory contents:")
#            for f in os.listdir():
#                print(f)
#            print(os.getcwd())
#            outfilename = 'barak.js'
#            for filename in os.scandir('configs'):
#              if filename.is_file():
#                with open(filename, 'rb') as readfile:
#                  shutil.copyfileobj(readfile, outfile)
#            with open(outfilename, 'wb') as outfile:
#                for filename in os.listdir('configs'):
#                    if filename == outfilename:
#                        # don't want to copy the output into the output
#                        continue
#                    with open(filename, 'rb') as readfile:
#                        shutil.copyfileobj(readfile, outfile)
#            os.system("cat ./barak.js")
      - name: push file to main
        uses: EndBug/add-and-commit@v9
        with:
          add: 'manifest.json'
          committer_name: Committer Name
          committer_email: mail@example.com
          default_author: github_actor
          message: 'Update manifest unified file'
          push: true
